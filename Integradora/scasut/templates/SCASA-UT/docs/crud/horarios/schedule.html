<!DOCTYPE html>
<html>
<head>
    <title>Calendario</title>
    <link rel="stylesheet" href="../../../css/font-awesome.css">
    <link rel="stylesheet" href="../../../css/bootstrap.css">
    <link rel="stylesheet" href="../../../css/bootstrap-theme.css">
    <!-- demo stylesheet -->
    <link type="../../../text/css" rel="stylesheet" href="media/layout.css" />    

    <link type="../../../text/css" rel="stylesheet" href="themes/calendar_g.css" />    <!-- 
    <link type="text/css" rel="stylesheet" href="themes/calendar_green.css" />    
    <link type="text/css" rel="stylesheet" href="themes/calendar_traditional.css" />    
    <link type="text/css" rel="stylesheet" href="themes/calendar_transparent.css" />    
    <link type="text/css" rel="stylesheet" href="themes/calendar_white.css" />    
-->
<!-- helper libraries -->
<script src="../../../js/jquery-1.9.1.min.js" type="text/javascript"></script>

<!-- daypilot libraries -->
<script src="../../../js/daypilot/daypilot-all.min.js" type="text/javascript"></script>
<style>
/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
</style>
</head>
<body>
    <div class="shadow"></div>
    <div class="hideSkipLink">
    </div>
    <div class="main">

        <div style="float:left; width: 100%">
            <div id="nav" style="width:100%;"></div>
        </div>
        <div style="margin-left: 160px;">

            <div class="space">
                Aula: <select id="theme">
                    <option value="calendar_default">Aula 1</option>
                    <option value="calendar_white">Aula 2</option>                        
                    <option value="calendar_g">Aula 3</option>                        
                    <option value="calendar_green">Aula 4</option>                        
                    <option value="calendar_traditional">Aula 5</option>                        
                    <option value="calendar_transparent">Aula 6</option>                        
                </select>
            </div>

            <div id="dp"></div>
        </div>
        <div id="myModal" class="modal">
          <!-- Modal content -->
          <div class="modal-content" style="width:30%;margin-top: 7%;">
            <span class="close">&times;</span>
            <div>                
                <div class="form-group">
                  <label for="sel1">Grupo</label>
                  <select class="form-control" id="selGrupo">
                    <option value="" >Seleccione un grupo</option>
                    <option value="TIC'S "> TIC'S 
                    </option>
                    <option value="OCI"> OCI
                    </option>
                    <option value="DN"> DN
                    </option>
                    <option value="MI"> MI
                    </option>
                    <option value="PA"> PA
                    </option>
                    <option value="ITIC"> ITIC
                    </option>                  
                    <option value="ICI"> ICI
                    </option>
                </select>
            </div>      
            <div class="form-group">
             <label class="control-label"  for="">Maestro</label>
             <select class="form-control" id="selMaestro">
                <option value="" >Seleccione un maestro</option>
                <option value="Ing. ruiz"> Ing. ruiz
                </option>
                <option value="Rodolfo ruedas"> Rodolfo ruedas
                </option>
                <option value="Marco Polo"> Marco Polo
                </option>
                <option value="Repre Sentamelo"> Repre Sentamelo
                </option>
                <option value="Quantum Tonio"> Quantum Tonio
                </option>
                <option value="resco Lara"> Presco Lara
                </option>                  
                <option value="Montes Moro"> Montes Moro
                </option>
            </select>
        </div>
        <div class="control-group">
          <!-- Button -->
          <div class="controls">
            <button class="btn" onclick="agregandoHora();">Crear</button>

        </div>
    </div>
</div>
</div>

</div>


<script type="text/javascript">
    var Maestro;
    var Grupo;
    var modal = document.getElementById('myModal');
    var nav = new DayPilot.Navigator("nav");
    nav.showMonths = -1;
    nav.selectMode = "week";    
    nav.onTimeRangeSelected = function(args) {
        dp.startDate = args.day;
        dp.update();
        loadEvents();
    };
    nav.init();

    var dp = new DayPilot.Calendar("dp");
    dp.viewType = "Week";
    dp.locale = "es-mx";
    dp.headerDateFormat  = "dddd";

    dp.onEventMoved = function (args) {
                    // $.post("backend_move.php", 
                    //         {
                    //             id: args.e.id(),
                    //             newStart: args.newStart.toString(),
                    //             newEnd: args.newEnd.toString()
                    //         }, 
                    //         function() {
                    //             console.log("Moved.");
                    //         });
                };

                dp.onEventResized = function (args) {
                    // $.post("backend_resize.php", 
                    //         {
                    //             id: args.e.id(),
                    //             newStart: args.newStart.toString(),
                    //             newEnd: args.newEnd.toString()
                    //         }, 
                    //         function() {
                    //             console.log("Resized.");
                    //         });
                };

                // event creating
                dp.onTimeRangeSelected = function (args) {
                    var name ;
                    modal.style.display = "block";
                    dp.clearSelection();
                    if (!Maestro || !Grupo) return;
                    var e = new DayPilot.Event({
                        start: args.start,
                        end: args.end,
                        id: DayPilot.guid(),
                        resource: args.resource,
                        text: Grupo  + ','+ Maestro
                    });
                    dp.events.add(e);
                    
                    // $.post("backend_create.php", 
                    //         {
                    //             start: args.start.toString(),
                    //             end: args.end.toString(),
                    //             name: name
                    //         }, 
                    //         function() {
                    //             console.log("Created.");
                    //         });

                };

                dp.onEventClick = function(args) {
                    // alert("clicked: " + args.e.id());
                    var name = prompt("Renombrar tarea name:", "Event");
                    dp.clearSelection();
                    if (!name) return;
                    var e = new DayPilot.Event({
                        start: args.start,
                        end: args.end,
                        id: DayPilot.guid(),
                        resource: args.resource,
                        text: name
                    });
                    dp.events.add(e);
                };

                dp.init();

                loadEvents();

                function loadEvents() {
                    var start = dp.visibleStart();
                    var end = dp.visibleEnd();

                    // $.post("backend_events.php", 
                    // {
                    //     start: start.toString(),
                    //     end: end.toString()
                    // }, 
                    // function(data) {
                    //     //console.log(data);
                    //     dp.events.list = data;
                    //     dp.update();
                    // });
                }
                function agregandoHora(){
                    Maestro = selMaestro.value;
                    Grupo = selGrupo.value;
                    modal.style.display = "none";
                }
            </script>
            
            <script type="text/javascript">
                // $(document).ready(function() {
                //     $("#theme").change(function(e) {
                //         dp.theme = this.value;
                //         dp.update();
                //     });
                // });  
                // Get the modal

                // Get the button that opens the modal
                // var btn = document.getElementById("myBtn");

                // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks the button, open the modal 
                // btn.onclick = function() {
                // }

                // When the user clicks on <span> (x), close the modal
                span.onclick = function() {
                    modal.style.display = "none";
                }

                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }
            </script>

        </div>
        <div class="clear">
        </div>

    </body>
    </html>

